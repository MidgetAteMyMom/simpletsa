mkdir CA
mkdir -p certs/CA
cd cert/CA
openssl req -new -newkey rsa:1024 -nodes -out ca.csr -keyout ca.key
openssl x509 -trustout -signkey ca.key -days 365 -req -in ca.csr -out ca.pem
cd ..
mkdir tsa
cd tsa/
openssl genrsa -out client.key 1024
openssl req -new -key client.key -out client.csr -nodes -days 768 -extensions 'my server exts' -config ../../extKey.cnf
openssl req -new -key client.key -out client.csr
openssl x509 -req -days 365 -in client.csr -CA ../CA/ca.pem -CAkey ../CA/ca.key -set_serial 01 -out client.crt -extfile ../../extKey.cnf
openssl pkcs12 -export -out tsa.p12 -inkey client.key -in client.crt -CAfile ../CA/ca.pem -chain
keytool -changealias -keystore tsa.p12 -storetype pkcs12 -alias 1 -destalias mykey
